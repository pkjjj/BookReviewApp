{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared/services/authentication.service\";\nimport * as i2 from \"../shared/services/request.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\n\nfunction LoginComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.errorMessage, \" \");\n  }\n}\n\nfunction LoginComponent_p_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"Username is required\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_em_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"em\");\n    i0.ɵɵtext(1, \"Password is required\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c0 = function () {\n  return [\"/registration\"];\n};\n\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(_authenticationService, _requestService, _router, _route) {\n      this._authenticationService = _authenticationService;\n      this._requestService = _requestService;\n      this._router = _router;\n      this._route = _route;\n      this.errorMessage = '';\n\n      this.validateControl = controlName => {\n        return this.loginForm.controls[controlName].invalid && this.loginForm.controls[controlName].touched;\n      };\n\n      this.hasError = (controlName, errorName) => {\n        return this.loginForm.controls[controlName].hasError(errorName);\n      };\n\n      this.loginUser = loginFormValue => {\n        this.showError = false;\n        const login = Object.assign({}, loginFormValue);\n        const userForAuth = {\n          email: login.username,\n          password: login.password\n        }; //check token\n\n        this._requestService.loginUser(userForAuth).subscribe(res => {\n          localStorage.setItem(\"token\", res.token);\n\n          this._authenticationService.sendAuthStateChangeNotification(res.isAuthSuccessful);\n\n          this._router.navigate(['/books']);\n        }, error => {\n          this.errorMessage = error;\n          this.showError = true;\n        });\n      };\n    }\n\n    ngOnInit() {\n      this.loginForm = new FormGroup({\n        username: new FormControl(\"\", [Validators.required]),\n        password: new FormControl(\"\", [Validators.required])\n      });\n    }\n\n  }\n\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthenticationService), i0.ɵɵdirectiveInject(i2.RequestService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n  };\n\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 26,\n    vars: 7,\n    consts: [[1, \"vh-100\"], [1, \"container-fluid\", \"h-custom\"], [1, \"row\", \"d-flex\", \"justify-content-center\", \"align-items-center\", \"h-100\"], [1, \"col-md-8\", \"col-lg-6\", \"col-xl-3\", \"offset-xl-1\"], [\"autocomplete\", \"off\", \"novalidate\", \"\", 3, \"formGroup\", \"ngSubmit\"], [1, \"text-center\", \"lead\", \"fw-normal\", \"mb-0\", \"me-3\"], [1, \"divider\", \"d-flex\", \"align-items-center\", \"my-4\"], [1, \"text-center\", \"fw-bold\", \"mx-3\", \"mb-0\"], [\"class\", \"alert alert-danger\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"form-outline\", \"mb-4\"], [\"type\", \"text\", \"id\", \"username\", \"formControlName\", \"username\", \"placeholder\", \"Enter a username\", 1, \"form-control\", \"form-control-lg\"], [4, \"ngIf\"], [1, \"form-outline\", \"mb-3\"], [\"type\", \"password\", \"id\", \"password\", \"formControlName\", \"password\", \"placeholder\", \"Enter password\", 1, \"form-control\", \"form-control-lg\"], [1, \"text-center\", \"text-lg-start\", \"mt-1\", \"pt-2\"], [1, \"d-flex\", \"justify-content-center\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-lg\", 2, \"padding-left\", \"2.5rem\", \"padding-right\", \"2.5rem\", 3, \"disabled\"], [1, \"text-center\", \"h-4\", \"fw-bold\", \"mt-2\", \"pt-1\", \"mb-0\"], [1, \"h-4\", 3, \"routerLink\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"form\", 4);\n        i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_4_listener() {\n          return ctx.loginUser(ctx.loginForm.value);\n        });\n        i0.ɵɵelementStart(5, \"div\");\n        i0.ɵɵelementStart(6, \"p\", 5);\n        i0.ɵɵtext(7, \"Sign in with\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 6);\n        i0.ɵɵelementStart(9, \"p\", 7);\n        i0.ɵɵtext(10, \"Or\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(11, LoginComponent_div_11_Template, 2, 1, \"div\", 8);\n        i0.ɵɵelementStart(12, \"div\", 9);\n        i0.ɵɵelement(13, \"input\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(14, LoginComponent_p_14_Template, 2, 0, \"p\", 11);\n        i0.ɵɵelementStart(15, \"div\", 12);\n        i0.ɵɵelement(16, \"input\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(17, LoginComponent_em_17_Template, 2, 0, \"em\", 11);\n        i0.ɵɵelementStart(18, \"div\", 14);\n        i0.ɵɵelementStart(19, \"div\", 15);\n        i0.ɵɵelementStart(20, \"button\", 16);\n        i0.ɵɵtext(21, \"Login\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"p\", 17);\n        i0.ɵɵtext(23, \"Don't have an account? \");\n        i0.ɵɵelementStart(24, \"a\", 18);\n        i0.ɵɵtext(25, \"Register\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", ctx.showError);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.validateControl(\"username\") && ctx.hasError(\"username\", \"required\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.validateControl(\"password\") && ctx.hasError(\"password\", \"required\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"disabled\", !ctx.loginForm.valid);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(6, _c0));\n      }\n    },\n    directives: [i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.FormGroupDirective, i5.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.FormControlName, i3.RouterLinkWithHref],\n    styles: [\".divider[_ngcontent-%COMP%]:after, .divider[_ngcontent-%COMP%]:before{content:\\\"\\\";flex:1;height:1px;background:#eee}.h-custom[_ngcontent-%COMP%]{height:calc(100% - 73px)}.center[_ngcontent-%COMP%]{position:absolute;bottom:50%}@media (max-width: 450px){.h-custom[_ngcontent-%COMP%]{height:100%}}\"]\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}